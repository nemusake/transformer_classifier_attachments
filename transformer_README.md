# Transformeræ±ºç®—çŸ­ä¿¡åˆ†æãƒ„ãƒ¼ãƒ«

æ±ºç®—çŸ­ä¿¡è£œè¶³è³‡æ–™ã®ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆåˆ†æã¨ã‚¼ãƒ­ã‚·ãƒ§ãƒƒãƒˆåˆ†é¡ã‚’è¡Œã†Pythonãƒ„ãƒ¼ãƒ«ã€‚

## å®Ÿè£…çŠ¶æ³

### âœ… å®Ÿè£…å®Œäº†
#### Phase 1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŸºç›¤æ§‹ç¯‰
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŸºç›¤**: uvãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–ã€ä¾å­˜é–¢ä¿‚ç®¡ç†
- **ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†**: pyproject.tomlè¨­å®šã€transformers/torchç­‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- **é–‹ç™ºç’°å¢ƒ**: Black/Flake8ç­‰ã®é–‹ç™ºãƒ„ãƒ¼ãƒ«è¨­å®š

#### Phase 2: ã‚³ã‚¢æ©Ÿèƒ½å®Ÿè£…ãƒ»ãƒ†ã‚¹ãƒˆ
- **11æ®µéšã‚¹ã‚³ã‚¢è§£é‡ˆ**: 0-10ã®çµ±ä¸€ã‚¹ã‚³ã‚¢ã‹ã‚‰è©³ç´°è§£é‡ˆç”Ÿæˆ
- **ç›´æ¥ãƒ•ã‚©ãƒ«ãƒ€æŒ‡å®š**: `attachments/13010/` ã®ã‚ˆã†ãªå€‹åˆ¥ä¼æ¥­ãƒ•ã‚©ãƒ«ãƒ€æŒ‡å®šå¯¾å¿œ
- **ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†**: æ±ºç®—çŸ­ä¿¡ã®è‡ªå‹•æ¤œå‡ºãƒ»æŠ½å‡ºã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æŠ½å‡º
- **å‡ºåŠ›æ©Ÿèƒ½**: CSV/JSONå½¢å¼å¯¾å¿œã€å®Œç’§ãªãƒ‡ãƒ¼ã‚¿æ§‹é€ 
- **GPU/CPUé¸æŠ**: è‡ªå‹•ãƒ‡ãƒã‚¤ã‚¹æ¤œå‡ºãƒ»é¸æŠ
- **å°è¦æ¨¡å‹•ä½œç¢ºèª**: 13010ä¼æ¥­ï¼ˆ12ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ã§ã®å‡¦ç†ç¢ºèªå®Œäº†

#### ãƒ¢ãƒ‡ãƒ«å¯¾å¿œçŠ¶æ³
- **tabularisai**: å¤šè¨€èªå¯¾å¿œã€æ­£å¸¸ãƒ­ãƒ¼ãƒ‰ãƒ»å‡¦ç†ç¢ºèªæ¸ˆã¿ âœ…
- **daigo**: èªè¨¼ã‚¨ãƒ©ãƒ¼ã§åˆ©ç”¨ä¸å¯ âŒ
- **moritzlaurer**: ã‚¼ãƒ­ã‚·ãƒ§ãƒƒãƒˆåˆ†é¡ã€æœªãƒ†ã‚¹ãƒˆ â¸ï¸

### ğŸ”„ ç¾åœ¨ã®èª²é¡Œ
- **ãƒ†ã‚­ã‚¹ãƒˆé•·åˆ¶é™**: æ±ºç®—çŸ­ä¿¡ãŒ512ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¶…éã—ã¦ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ
- **å®Ÿéš›ã®æ„Ÿæƒ…åˆ†æ**: ã™ã¹ã¦ã€Œåˆ†æã‚¨ãƒ©ãƒ¼ã€ã§å®Ÿéš›ã®ã‚¹ã‚³ã‚¢ãŒå–å¾—ã§ããªã„çŠ¶æ…‹

### â¸ï¸ æ¬¡ã®å®Ÿè£…äºˆå®š
- **Phase 2A**: ãƒ†ã‚­ã‚¹ãƒˆåˆ†å‰²æ©Ÿèƒ½ï¼ˆ512ãƒˆãƒ¼ã‚¯ãƒ³ä»¥ä¸‹ã«ãƒãƒ£ãƒ³ã‚¯åˆ†å‰²ï¼‰
- **ä»–ãƒ¢ãƒ‡ãƒ«æ¤œè¨¼**: moritzlauerãƒ¢ãƒ‡ãƒ«ã§ã®å‹•ä½œç¢ºèª
- **ä»£æ›¿ãƒ¢ãƒ‡ãƒ«**: daigoã®ä»£æ›¿ã¨ãªã‚‹æ—¥æœ¬èªãƒ¢ãƒ‡ãƒ«ã®æ¤œè¨

## ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶

- Python 3.8.1+
- GPU: ä»»æ„ï¼ˆè‡ªå‹•æ¤œå‡ºã€CPU fallbackå¯¾å¿œï¼‰
- ãƒ¡ãƒ¢ãƒª: 8GBä»¥ä¸Šæ¨å¥¨
- uv: Pythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ãƒ„ãƒ¼ãƒ«

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
# uvä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰
uv sync

# ã¾ãŸã¯æ‰‹å‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install transformers torch datasets accelerate tokenizers
```

### 2. é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
# é–‹ç™ºãƒ„ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
uv sync --dev

# ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯
uv run black transformer.py
uv run flake8 transformer.py
```

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•
```bash
# uvç’°å¢ƒã§ã®å®Ÿè¡Œï¼ˆæ¨å¥¨ï¼‰
uv run python transformer.py sentiment daigo -i attachments/ -o results/

# ã¾ãŸã¯ç›´æ¥å®Ÿè¡Œ
python transformer.py sentiment daigo -i attachments/ -o results/
```

### å„ãƒ¢ãƒ‡ãƒ«ã§ã®å®Ÿè¡Œ
```bash
# æ—¥æœ¬èªç‰¹åŒ–è»½é‡ãƒ¢ãƒ‡ãƒ«
uv run python transformer.py sentiment daigo -i attachments/ -o results/

# å¤šè¨€èªå¯¾å¿œ5æ®µéšè©•ä¾¡ãƒ¢ãƒ‡ãƒ«
uv run python transformer.py sentiment tabularisai -i attachments/ -o results/

# ã‚¼ãƒ­ã‚·ãƒ§ãƒƒãƒˆåˆ†é¡ãƒ¢ãƒ‡ãƒ«
uv run python transformer.py sentiment moritzlaurer -i attachments/ -o results/
```

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³æŒ‡å®š
```bash
# CPUå¼·åˆ¶ä½¿ç”¨
uv run python transformer.py sentiment daigo --cpu -i attachments/ -o results/

# å‡ºåŠ›å½¢å¼æŒ‡å®š
uv run python transformer.py sentiment daigo -f csv -i attachments/ -o results/

# è©³ç´°ãƒ­ã‚°ä»˜ã
uv run python transformer.py sentiment daigo -v -i attachments/ -o results/
```

## ã‚ªãƒ—ã‚·ãƒ§ãƒ³

- `-i`: å…¥åŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: attachments/ï¼‰
- `-o`: å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: results/ï¼‰
- `-f`: å‡ºåŠ›å½¢å¼ï¼ˆcsv/json/bothï¼‰
- `--cpu`: CPUå¼·åˆ¶ä½¿ç”¨
- `-v`: è©³ç´°ãƒ­ã‚°

## å‡ºåŠ›ãƒ‡ãƒ¼ã‚¿

**CSV**: file_path, company_code, date, period, content_length, sentiment_score, sentiment_interpretation, model_used
**JSON**: ä¸Šè¨˜ + raw_scores, errorï¼ˆè©³ç´°ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä»˜ãï¼‰

## ãƒ¢ãƒ‡ãƒ«ç‰¹å¾´

- **daigo**: è»½é‡ã€æ—¥æœ¬èªç‰¹åŒ–ã€2å€¤åˆ†é¡
- **tabularisai**: å¤šè¨€èªå¯¾å¿œã€3å€¤åˆ†é¡
- **moritzlaurer**: ã‚¼ãƒ­ã‚·ãƒ§ãƒƒãƒˆã€7æ®µéšåˆ†é¡

## ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

### å‹•ä½œç¢ºèªæ¸ˆã¿ã®ãƒ†ã‚¹ãƒˆ
```bash
# å°è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã§ã®ãƒ†ã‚¹ãƒˆï¼ˆæ¨å¥¨ãƒ»å‹•ä½œç¢ºèªæ¸ˆã¿ï¼‰
uv run python transformer.py sentiment tabularisai -i attachments/13010/ -o results/ -v

# å…¨ãƒ‡ãƒ¼ã‚¿ã§ã®ãƒ†ã‚¹ãƒˆï¼ˆå¤§é‡å‡¦ç†ãƒ»æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ï¼‰
uv run python transformer.py sentiment tabularisai -i attachments/ -o results/ -v

# CPUå¼·åˆ¶ä½¿ç”¨ã§ã®ãƒ†ã‚¹ãƒˆ
uv run python transformer.py sentiment tabularisai -i attachments/13010/ -o results/ --cpu -v
```

### ãã®ä»–ã®ã‚³ãƒãƒ³ãƒ‰
```bash
# ãƒ˜ãƒ«ãƒ—è¡¨ç¤º
uv run python transformer.py --help
uv run python transformer.py sentiment --help

# å‡ºåŠ›å½¢å¼æŒ‡å®š
uv run python transformer.py sentiment tabularisai -i attachments/13010/ -o results/ -f csv
```

### âš ï¸ ç¾åœ¨å‹•ä½œã—ãªã„ãƒ†ã‚¹ãƒˆ
```bash
# daigoãƒ¢ãƒ‡ãƒ«ï¼ˆèªè¨¼ã‚¨ãƒ©ãƒ¼ï¼‰
uv run python transformer.py sentiment daigo -i attachments/13010/ -v

# moritzlauerãƒ¢ãƒ‡ãƒ«ï¼ˆæœªãƒ†ã‚¹ãƒˆï¼‰
uv run python transformer.py sentiment moritzlaurer -i attachments/13010/ -v
```

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
transformer_classifier_attachments/
â”œâ”€â”€ pyproject.toml          # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šãƒ»ä¾å­˜é–¢ä¿‚
â”œâ”€â”€ transformer.py          # ãƒ¡ã‚¤ãƒ³å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ transformer_README.md   # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ sow.md                  # å®Ÿè£…è¨ˆç”»æ›¸
â”œâ”€â”€ pipeline_research.md    # ãƒ¢ãƒ‡ãƒ«èª¿æŸ»çµæœ
â”œâ”€â”€ CLAUDE.md              # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ–¹é‡
â”œâ”€â”€ codelist.csv           # ä¼æ¥­è¨¼åˆ¸ã‚³ãƒ¼ãƒ‰ä¸€è¦§
â””â”€â”€ attachments/           # æ±ºç®—çŸ­ä¿¡ãƒ‡ãƒ¼ã‚¿ï¼ˆå…¥åŠ›ï¼‰
    â”œâ”€â”€ 13010/             # å„ä¼æ¥­ãƒ•ã‚©ãƒ«ãƒ€
    â”œâ”€â”€ 130A0/
    â””â”€â”€ ...
```

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### ğŸš§ ç¾åœ¨é€²è¡Œä¸­
**Phase 2A: ãƒ†ã‚­ã‚¹ãƒˆåˆ†å‰²æ©Ÿèƒ½ã®å®Ÿè£…**
- æ±ºç®—çŸ­ä¿¡ã®é•·ã„ãƒ†ã‚­ã‚¹ãƒˆã‚’512ãƒˆãƒ¼ã‚¯ãƒ³ä»¥ä¸‹ã«åˆ†å‰²
- å„ãƒãƒ£ãƒ³ã‚¯ã®æ„Ÿæƒ…åˆ†æçµæœã‚’çµ±åˆã—ã¦æœ€çµ‚ã‚¹ã‚³ã‚¢ã‚’ç®—å‡º
- å®Ÿéš›ã®æ„Ÿæƒ…åˆ†æçµæœå–å¾—ã‚’ç›®æŒ‡ã™

### ğŸ“‹ ä»Šå¾Œã®äºˆå®š
1. **Phase 2Aå®Œäº†**: ãƒ†ã‚­ã‚¹ãƒˆåˆ†å‰²ã«ã‚ˆã‚‹æ„Ÿæƒ…åˆ†æã®å®Ÿç¾
2. **Phase 3**: moritzlauerãƒ¢ãƒ‡ãƒ«ã§ã®ã‚¼ãƒ­ã‚·ãƒ§ãƒƒãƒˆåˆ†é¡ãƒ†ã‚¹ãƒˆ
3. **Phase 4**: daigoã®ä»£æ›¿æ—¥æœ¬èªãƒ¢ãƒ‡ãƒ«æ¤œè¨ãƒ»å®Ÿè£…
4. **Phase 5**: å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã§ã®æ€§èƒ½æ¤œè¨¼ãƒ»æœ€é©åŒ–

### ğŸ“Š ç¾åœ¨ã®æˆæœ
- **å‡¦ç†å¯èƒ½ãƒ•ã‚¡ã‚¤ãƒ«æ•°**: 37,327ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆå…¨ãƒ‡ãƒ¼ã‚¿ï¼‰
- **å‹•ä½œç¢ºèªæ¸ˆã¿ç¯„å›²**: å˜ä¸€ä¼æ¥­ï¼ˆ13010ï¼‰ã®12ãƒ•ã‚¡ã‚¤ãƒ«
- **å‡ºåŠ›ãƒ‡ãƒ¼ã‚¿å“è³ª**: å®Œç’§ï¼ˆãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æŠ½å‡ºãƒ»CSV/JSONå¯¾å¿œï¼‰
- **èª²é¡Œ**: ãƒ†ã‚­ã‚¹ãƒˆé•·åˆ¶é™ã«ã‚ˆã‚Šå®Ÿéš›ã®æ„Ÿæƒ…åˆ†ææœªå®Ÿç¾